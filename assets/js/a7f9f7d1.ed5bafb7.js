"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[4244],{134:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>p,frontMatter:()=>l,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"website-setup/nextjs-deployment","title":"Next.js Deployment","description":"This guide explains how to deploy your eDemand web application with SEO support using Next.js on a VPS server.","source":"@site/docs/website-setup/nextjs-deployment.md","sourceDirName":"website-setup","slug":"/website-setup/nextjs-deployment","permalink":"/eDemand-Doc/docs/website-setup/nextjs-deployment","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":11,"frontMatter":{"sidebar_position":11},"sidebar":"webSidebar","previous":{"title":"Analytics and Advertising Setup","permalink":"/eDemand-Doc/docs/website-setup/analytics-and-ads-setup"},"next":{"title":".htaccess Configuration","permalink":"/eDemand-Doc/docs/website-setup/htaccess-config"}}');var t=s(4848),r=s(8453);const l={sidebar_position:11},o="Next.js Deployment",a={},c=[{value:"Uploading Your Project",id:"uploading-your-project",level:2},{value:"Installing Node.js",id:"installing-nodejs",level:2},{value:"Installing PM2",id:"installing-pm2",level:2},{value:"Automated Deployment Script (Recommended)",id:"automated-deployment-script-recommended",level:2},{value:"Manual Deployment",id:"manual-deployment",level:2},{value:"Setting Up the Project",id:"setting-up-the-project",level:2},{value:"Running with PM2",id:"running-with-pm2",level:2},{value:"Managing PM2 Processes",id:"managing-pm2-processes",level:2},{value:"Testing Your Deployment",id:"testing-your-deployment",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"nextjs-deployment",children:"Next.js Deployment"})}),"\n",(0,t.jsx)(n.p,{children:"This guide explains how to deploy your eDemand web application with SEO support using Next.js on a VPS server."}),"\n",(0,t.jsx)(n.admonition,{type:"warning",children:(0,t.jsx)(n.p,{children:"This is an advanced deployment option for users who have a VPS server and are familiar with Node.js, npm, and pm2. The instructions assume you're using a Debian-based Linux distribution."})}),"\n",(0,t.jsx)(n.h2,{id:"uploading-your-project",children:"Uploading Your Project"}),"\n",(0,t.jsx)(n.p,{children:"Before starting deployment, upload your project to the server:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Use an FTP client like ",(0,t.jsx)(n.a,{href:"https://filezilla-project.org/download.php",children:"FileZilla"})," to upload your project files to your server"]}),"\n",(0,t.jsx)(n.li,{children:"Alternatively, use Git to clone your repository directly on the server"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"installing-nodejs",children:"Installing Node.js"}),"\n",(0,t.jsx)(n.p,{children:"Node.js can be installed using NVM (Node Version Manager) to easily manage multiple Node.js versions:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"sudo apt install curl\ncurl https://raw.githubusercontent.com/creationix/nvm/master/install.sh | bash\nsource ~/.bashrc  # or restart your terminal\nnvm install node 20.*\n"})}),"\n",(0,t.jsx)(n.p,{children:"Verify the installation with:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"node -v\n"})}),"\n",(0,t.jsxs)(n.p,{children:["For more information, refer to the ",(0,t.jsx)(n.a,{href:"https://nodejs.org/docs/latest/api/",children:"official Node.js documentation"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"installing-pm2",children:"Installing PM2"}),"\n",(0,t.jsx)(n.p,{children:"PM2 is a production process manager for Node.js applications. Install it globally with:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npm install pm2 -g\n"})}),"\n",(0,t.jsx)(n.h2,{id:"automated-deployment-script-recommended",children:"Automated Deployment Script (Recommended)"}),"\n",(0,t.jsx)(n.admonition,{title:"Quick Deployment",type:"tip",children:(0,t.jsxs)(n.p,{children:["For faster and easier deployment, use the included ",(0,t.jsx)(n.code,{children:"deploy_vps.sh"})," script which automates all the steps below."]})}),"\n",(0,t.jsx)(n.p,{children:"The project includes an automated deployment script that handles the entire deployment process:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Quick Start:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Navigate to your project directory\ncd /var/www/html/edemand\n\n# Make script executable\nchmod +x deploy_vps.sh\n\n# Run deployment\n./deploy_vps.sh\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"What the script does:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u2705 Verifies custom server setup"}),"\n",(0,t.jsxs)(n.li,{children:["\u2699\ufe0f Configures PM2 with ",(0,t.jsx)(n.code,{children:"ecosystem.config.cjs"})]}),"\n",(0,t.jsx)(n.li,{children:"\ud83e\uddf9 Cleans old builds"}),"\n",(0,t.jsx)(n.li,{children:"\ud83d\udce6 Installs dependencies"}),"\n",(0,t.jsx)(n.li,{children:"\ud83d\uddfa\ufe0f Generates sitemap and service worker"}),"\n",(0,t.jsx)(n.li,{children:"\ud83c\udfd7\ufe0f Builds the application"}),"\n",(0,t.jsxs)(n.li,{children:["\ud83d\udd27 Generates ",(0,t.jsx)(n.code,{children:".htaccess"})," for Apache"]}),"\n",(0,t.jsx)(n.li,{children:"\ud83d\ude80 Starts/restarts PM2 process"}),"\n",(0,t.jsx)(n.li,{children:"\ud83d\udd04 Reloads Apache"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Port Configuration:"})}),"\n",(0,t.jsx)(n.p,{children:"During deployment, you'll be prompted to configure the port:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Current Port: 8001\n\u279c Enter Port (Press Enter to keep 8001):\n"})}),"\n",(0,t.jsxs)(n.p,{children:["The script automatically updates the ",(0,t.jsx)(n.code,{children:"ecosystem.config.cjs"})," file with your chosen port."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"PM2 Configuration (ecosystem.config.cjs):"})}),"\n",(0,t.jsxs)(n.p,{children:["The project uses ",(0,t.jsx)(n.code,{children:"ecosystem.config.cjs"})," for PM2 process management:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"module.exports = {\n  apps: [{\n    name: 'edemand-web',\n    script: './server.js',\n    instances: 1,\n    exec_mode: 'cluster',\n    env: {\n      NODE_ENV: 'production',\n      NODE_PORT: 8001,  // Automatically updated by deploy script\n    }\n  }]\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:"To start with ecosystem config:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"pm2 start ecosystem.config.cjs\npm2 save\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"manual-deployment",children:"Manual Deployment"}),"\n",(0,t.jsx)(n.p,{children:"If you prefer to deploy manually, follow these steps:"}),"\n",(0,t.jsx)(n.h2,{id:"setting-up-the-project",children:"Setting Up the Project"}),"\n",(0,t.jsx)(n.p,{children:"Make sure you have all the dependencies installed:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npm install\n"})}),"\n",(0,t.jsx)(n.p,{children:"Build the production application:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npm run build\n"})}),"\n",(0,t.jsx)(n.h2,{id:"running-with-pm2",children:"Running with PM2"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Option 1: Using ecosystem.config.cjs (Recommended)"})}),"\n",(0,t.jsx)(n.p,{children:"Start your application using the ecosystem configuration file:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"pm2 start ecosystem.config.cjs\npm2 save\n"})}),"\n",(0,t.jsx)(n.p,{children:"This method uses the pre-configured settings including app name, port, and environment variables."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Option 2: Manual PM2 Start"})}),"\n",(0,t.jsx)(n.p,{children:"Alternatively, start with a manual command:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'pm2 start "npm start" -n "YOUR_PROJECT_NAME"\n'})}),"\n",(0,t.jsx)(n.p,{children:"Check if the PM2 process is running correctly:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"pm2 ls\n"})}),"\n",(0,t.jsx)(n.p,{children:"You should see your application in the list of running processes:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"PM2 Success",src:s(5019).A+"",width:"999",height:"71"})}),"\n",(0,t.jsx)(n.p,{children:"If you see errors:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"PM2 Error",src:s(1064).A+"",width:"999",height:"71"})}),"\n",(0,t.jsxs)(n.p,{children:["Run ",(0,t.jsx)(n.code,{children:"pm2 logs"})," to see detailed error messages."]}),"\n",(0,t.jsx)(n.h2,{id:"managing-pm2-processes",children:"Managing PM2 Processes"}),"\n",(0,t.jsx)(n.p,{children:"To restart a PM2 process:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"pm2 restart [id]\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Replace ",(0,t.jsx)(n.code,{children:"[id]"})," with your process ID (e.g., ",(0,t.jsx)(n.code,{children:"pm2 restart 0"}),")."]}),"\n",(0,t.jsx)(n.p,{children:"To delete a PM2 process:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'pm2 delete "YOUR_PROJECT_NAME"\n'})}),"\n",(0,t.jsxs)(n.p,{children:["For more information, refer to the ",(0,t.jsx)(n.a,{href:"https://pm2.keymetrics.io/docs/usage/quick-start/",children:"official PM2 documentation"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"testing-your-deployment",children:"Testing Your Deployment"}),"\n",(0,t.jsx)(n.p,{children:"After completing all steps:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Visit your website using your domain name"}),"\n",(0,t.jsx)(n.li,{children:"Verify that all pages load correctly with proper SEO metadata"}),"\n",(0,t.jsx)(n.li,{children:"Check that server-side rendering is working by viewing the page source"}),"\n",(0,t.jsx)(n.li,{children:"Test all functionality to ensure everything works as expected"}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},1064:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/pm2_error-10819efa022a6374345db35f8e214cc9.png"},5019:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/pm2_success-8ef884ff330e427ad235818533b39d7a.png"},8453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>o});var i=s(6540);const t={},r=i.createContext(t);function l(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);